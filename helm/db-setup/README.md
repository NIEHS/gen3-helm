This db-setup chart is a library chart, meant to support the other deployments in this repo. A large portion of the services in gen3 require access to a database in order to perform their work, and before this chart was written, it was required to set up those databases manually. However, by including this chart in any other gen3 deployment, you can automatically create those databases and users as you install the larger chart. 

This chart consists of only one "named template," which is a term for the items you might find in _helpers.tpl file. In order to use it, all you need to do is include this chart as a dependency in the chart you are developing, and then in some file, use this snippet: `{{- include "db-setup.-setup-job" . -}}`. This snippet will expand into the job to set up the DBs on install.

The job itself, however, does not know what to call the database(s) and user(s) it creates, nor does it know how to
connect to the pre-existing database instance that will host all of them. To provide that information, you can use the `values.yaml` in this chart as a template to show you how to provide that information in the `values.yaml` of your own chart. The `host` field should be self explanatory, and everything under master is used by the job to connect to the DB server and create the databases. (So the username + password provided must be a user with the permission to perform such actions.)

And then finally, under the `databases` section is where you list out all of the databases you want to create. The job is designed to loop over the array named `databases`, so you should be able to create an arbitrary number of database/user combinations. Currently, each entry must have a database name, username, and password, so I'm not certain how it would handle the case where the same user accesses multiple databases. Additionally, the job currently only supports Postgres databases, as it relies on the `psql` command to connect to the DB. 